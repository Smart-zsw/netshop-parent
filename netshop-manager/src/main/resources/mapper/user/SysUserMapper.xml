<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zsw.netshop.manager.mapper.SysUserMapper">

    <sql id="columns">
        id,username,userName,password,name,phone,avatar,description,status,create_time,update_time,is_deleted
    </sql>

    <!-- 用户条件分页查询接口 -->
    <select id="findByPage" resultType="com.zsw.netshop.model.entity.system.SysUser">
        select <include refid="columns"/>
            from sys_user
        <where>
            <if test="keyword != null and keyword !=''">
                and username like concat('%',#{keyword},'%')
            </if>

            <if test="createTimeBegin != null and createTimeBegin !=''">
                and creat_time >= #{createTimeBegin}
            </if>

            <if test="createTimeEnd != null and createTimeEnd !=''">
                and creat_time &lt;= #{createTimeEnd}
            </if>
        and is_deleted = 0
        </where>
        order by id desc
    </select>

    <select id="selectUserInfoByUserName" resultType="com.zsw.netshop.model.entity.system.SysUser">
        SELECT <include refid="columns"/> FROM sys_user WHERE username=#{username}
    </select>
</mapper>